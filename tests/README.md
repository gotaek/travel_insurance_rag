# í…ŒìŠ¤íŠ¸ êµ¬ì¡° ë° ê°€ì´ë“œ

## ğŸ“ í…ŒìŠ¤íŠ¸ ë””ë ‰í† ë¦¬ êµ¬ì¡°

```
tests/
â”œâ”€â”€ __init__.py
â”œâ”€â”€ README.md
â”œâ”€â”€ unit/                          # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ test_planner_fallback.py  # Fallback classify í…ŒìŠ¤íŠ¸
â”‚   â””â”€â”€ test_planner_llm.py       # LLM ê¸°ë°˜ planner í…ŒìŠ¤íŠ¸
â”œâ”€â”€ integration/                   # í†µí•© í…ŒìŠ¤íŠ¸
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ test_planner_integration.py
â””â”€â”€ fixtures/                      # í…ŒìŠ¤íŠ¸ í”½ìŠ¤ì²˜
    â””â”€â”€ test_data.py              # í…ŒìŠ¤íŠ¸ ë°ì´í„° ë° í”½ìŠ¤ì²˜
```

## ğŸ§ª í…ŒìŠ¤íŠ¸ ìœ í˜•

### 1. ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ (Unit Tests)
- **ìœ„ì¹˜**: `tests/unit/`
- **ëª©ì **: ê°œë³„ í•¨ìˆ˜/í´ë˜ìŠ¤ì˜ ë™ì‘ ê²€ì¦
- **ë§ˆì»¤**: `@pytest.mark.unit`

#### ì£¼ìš” í…ŒìŠ¤íŠ¸ íŒŒì¼:
- `test_planner_fallback.py`: Fallback classify ì •í™•ë„ í…ŒìŠ¤íŠ¸
- `test_planner_llm.py`: LLM ê¸°ë°˜ planner í…ŒìŠ¤íŠ¸

### 2. í†µí•© í…ŒìŠ¤íŠ¸ (Integration Tests)
- **ìœ„ì¹˜**: `tests/integration/`
- **ëª©ì **: ì „ì²´ ì‹œìŠ¤í…œì˜ í†µí•© ë™ì‘ ê²€ì¦
- **ë§ˆì»¤**: `@pytest.mark.integration`

#### ì£¼ìš” í…ŒìŠ¤íŠ¸ íŒŒì¼:
- `test_planner_integration.py`: Planner í†µí•© í…ŒìŠ¤íŠ¸

### 3. í”½ìŠ¤ì²˜ (Fixtures)
- **ìœ„ì¹˜**: `tests/fixtures/`
- **ëª©ì **: í…ŒìŠ¤íŠ¸ ë°ì´í„° ë° ê³µí†µ ì„¤ì • ì œê³µ

## ğŸš€ í…ŒìŠ¤íŠ¸ ì‹¤í–‰ ë°©ë²•

### ê¸°ë³¸ ëª…ë ¹ì–´
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
make test

# ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
make test-unit

# í†µí•© í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
make test-integration

# ë²¤ì¹˜ë§ˆí¬ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
make test-benchmark

# ë¹ ë¥¸ í…ŒìŠ¤íŠ¸ (ëŠë¦° í…ŒìŠ¤íŠ¸ ì œì™¸)
make test-fast
```

### pytest ì§ì ‘ ì‹¤í–‰
```bash
# ì „ì²´ í…ŒìŠ¤íŠ¸
pytest tests/ -v

# íŠ¹ì • ë§ˆì»¤ë§Œ ì‹¤í–‰
pytest tests/ -v -m unit
pytest tests/ -v -m integration
pytest tests/ -v -m benchmark

# íŠ¹ì • íŒŒì¼ë§Œ ì‹¤í–‰
pytest tests/unit/test_planner_fallback.py -v

# ì»¤ë²„ë¦¬ì§€ í¬í•¨
pytest tests/ --cov=graph --cov-report=html
```

## ğŸ“Š í…ŒìŠ¤íŠ¸ ë§ˆì»¤

| ë§ˆì»¤ | ì„¤ëª… | ì‚¬ìš© ì˜ˆì‹œ |
|------|------|-----------|
| `unit` | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ | `@pytest.mark.unit` |
| `integration` | í†µí•© í…ŒìŠ¤íŠ¸ | `@pytest.mark.integration` |
| `slow` | ëŠë¦° í…ŒìŠ¤íŠ¸ | `@pytest.mark.slow` |
| `benchmark` | ì„±ëŠ¥ ë²¤ì¹˜ë§ˆí¬ | `@pytest.mark.benchmark` |

## ğŸ¯ ì£¼ìš” í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤

### Fallback Classify í…ŒìŠ¤íŠ¸
- **QA Intent**: ê¸°ë³¸ ì§ˆë¬¸-ë‹µë³€ ë¶„ë¥˜
- **Summary Intent**: ìš”ì•½ ìš”ì²­ ë¶„ë¥˜
- **Compare Intent**: ë¹„êµ ìš”ì²­ ë¶„ë¥˜ (í•µì‹¬!)
- **Recommend Intent**: ì¶”ì²œ ìš”ì²­ ë¶„ë¥˜
- **ì›¹ ê²€ìƒ‰ í•„ìš”ì„±**: ì‹¤ì‹œê°„ ì •ë³´ í•„ìš”ì„± íŒë‹¨

### í•µì‹¬ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤
```python
# íœ´ëŒ€í’ˆ ì¡°í•­ ë¹„êµ (í•µì‹¬!)
"íœ´ëŒ€í’ˆ ê´€ë ¨ ì¡°í•­ì€ ì–´ë–»ê²Œ ë¼?" â†’ compare intent

# ê°œì¸ìš©í’ˆ ë³´ìƒ ê·œì • ë¹„êµ
"ê°œì¸ìš©í’ˆ ë³´ìƒ ê·œì •ì€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”?" â†’ compare intent

# ì§€ì—­ë³„ ì¶”ì²œ (ì›¹ ê²€ìƒ‰ í•„ìš”)
"2025ë…„ 3ì›” ì¼ë³¸ ë„ì¿„ ì—¬í–‰ì— ì¶”ì²œí•˜ëŠ” ë³´í—˜ì€?" â†’ recommend intent + web search
```

## ğŸ“ˆ ì„±ëŠ¥ ê¸°ì¤€

- **ì •í™•ë„**: 100% (13/13 í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ í†µê³¼)
- **í‰ê·  ì²˜ë¦¬ ì‹œê°„**: < 0.1ì´ˆ/ì§ˆë¬¸
- **ë©”ëª¨ë¦¬ ì‚¬ìš©ëŸ‰**: ìµœì í™”ë¨

## ğŸ”§ í…ŒìŠ¤íŠ¸ ìœ ì§€ë³´ìˆ˜

### ìƒˆë¡œìš´ í…ŒìŠ¤íŠ¸ ì¶”ê°€
1. ì ì ˆí•œ ë””ë ‰í† ë¦¬ì— í…ŒìŠ¤íŠ¸ íŒŒì¼ ìƒì„±
2. ë§ˆì»¤ ì¶”ê°€ (`@pytest.mark.unit` ë“±)
3. í”½ìŠ¤ì²˜ ì‚¬ìš©í•˜ì—¬ í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬
4. ë¬¸ì„œí™” ë° ì£¼ì„ ì¶”ê°€

### í…ŒìŠ¤íŠ¸ ë°ì´í„° ê´€ë¦¬
- `tests/fixtures/test_data.py`ì—ì„œ ì¤‘ì•™ ê´€ë¦¬
- JSON í˜•íƒœë¡œ í…ŒìŠ¤íŠ¸ ë°ì´í„° ì €ì¥ ê°€ëŠ¥
- `make test-data` ëª…ë ¹ì–´ë¡œ ë°ì´í„° ìƒì„±

## ğŸ› ë¬¸ì œ í•´ê²°

### ì¼ë°˜ì ì¸ ë¬¸ì œ
1. **Import ì˜¤ë¥˜**: í”„ë¡œì íŠ¸ ë£¨íŠ¸ ê²½ë¡œ í™•ì¸
2. **ë§ˆì»¤ ê²½ê³ **: `pytest.ini`ì—ì„œ ë§ˆì»¤ ë“±ë¡ í™•ì¸
3. **ì˜ì¡´ì„± ì˜¤ë¥˜**: `requirements.txt` í™•ì¸

### ë””ë²„ê¹…
```bash
# ìƒì„¸ ì¶œë ¥ìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì‹¤í–‰
pytest tests/ -v -s

# íŠ¹ì • í…ŒìŠ¤íŠ¸ë§Œ ì‹¤í–‰
pytest tests/unit/test_planner_fallback.py::TestFallbackClassify::test_compare_intent_classification -v

# ì‹¤íŒ¨í•œ í…ŒìŠ¤íŠ¸ë§Œ ì¬ì‹¤í–‰
pytest tests/ --lf
```

## ğŸ“‹ í…ŒìŠ¤íŠ¸ ë¦¬í¬íŠ¸

```bash
# HTML ë¦¬í¬íŠ¸ ìƒì„±
make test-report

# ì»¤ë²„ë¦¬ì§€ ë¦¬í¬íŠ¸
make test-coverage
```

## ğŸ‰ ì„±ê³¼

- **ì •í™•ë„**: 100% ë‹¬ì„±
- **í•µì‹¬ ê¸°ëŠ¥**: "íœ´ëŒ€í’ˆ ê´€ë ¨ ì¡°í•­" compare ë¶„ë¥˜ ì„±ê³µ
- **ì„±ëŠ¥**: ë¹ ë¥¸ ì²˜ë¦¬ ì†ë„
- **ìœ ì§€ë³´ìˆ˜ì„±**: ì²´ê³„ì ì¸ í…ŒìŠ¤íŠ¸ êµ¬ì¡°
